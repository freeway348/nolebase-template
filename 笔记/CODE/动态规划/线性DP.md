- å®šä¹‰ï¼šdpçš„é€’æ¨æ–¹ç¨‹æ˜¯çº¿æ€§å…³ç³»
### å…¸å‹ä¾‹é¢˜ï¼š
#### ï¼ˆ1ï¼‰æ•°å­—ä¸‰è§’å½¢
- åŸé¢˜ï¼š[P1216 [USACO1.5] [IOI1994]æ•°å­—ä¸‰è§’å½¢ Number Triangles](https://www.luogu.com.cn/problem/P1216)
##### é¢˜ç›®æè¿°
è§‚å¯Ÿä¸‹é¢çš„æ•°å­—é‡‘å­—å¡”ã€‚

å†™ä¸€ä¸ªç¨‹åºæ¥æŸ¥æ‰¾ä»æœ€é«˜ç‚¹åˆ°åº•éƒ¨ä»»æ„å¤„ç»“æŸçš„è·¯å¾„ï¼Œä½¿è·¯å¾„ç»è¿‡æ•°å­—çš„å’Œæœ€å¤§ã€‚æ¯ä¸€æ­¥å¯ä»¥èµ°åˆ°å·¦ä¸‹æ–¹çš„ç‚¹ä¹Ÿå¯ä»¥åˆ°è¾¾å³ä¸‹æ–¹çš„ç‚¹ã€‚
![](95pzs0ne.png)
åœ¨ä¸Šé¢çš„æ ·ä¾‹ä¸­ï¼Œä»Â 7â†’3â†’8â†’7â†’57â†’3â†’8â†’7â†’5Â çš„è·¯å¾„äº§ç”Ÿäº†æœ€å¤§æƒå€¼ã€‚
##### è¾“å…¥æ ¼å¼
ç¬¬ä¸€ä¸ªè¡Œä¸€ä¸ªæ­£æ•´æ•°Â ğ‘ŸrÂ ,è¡¨ç¤ºè¡Œçš„æ•°ç›®ã€‚

åé¢æ¯è¡Œä¸ºè¿™ä¸ªæ•°å­—é‡‘å­—å¡”ç‰¹å®šè¡ŒåŒ…å«çš„æ•´æ•°ã€‚
##### è¾“å‡ºæ ¼å¼
å•ç‹¬çš„ä¸€è¡Œ,åŒ…å«é‚£ä¸ªå¯èƒ½å¾—åˆ°çš„æœ€å¤§çš„å’Œã€‚

##### æ ·ä¾‹
###### è¾“å…¥1
```
5
7
3 8
8 1 0
2 7 4 4
4 5 2 6 5
```
###### è¾“å‡º1
```
30
```
##### é¢˜è§£
###### æ€è·¯
```mermaid
flowchart LR
A[åŠ¨æ€è§„åˆ’] --> B["çŠ¶æ€è¡¨ç¤ºf[i,j]"]
A[åŠ¨æ€è§„åˆ’] --> C[çŠ¶æ€è®¡ç®—]
B["çŠ¶æ€è¡¨ç¤ºf[i,j]"] --> D["é›†åˆï¼šæ‰€æœ‰ä»èµ·ç‚¹èµ°åˆ°ç‚¹(i,j)çš„è·¯å¾„"]
B["çŠ¶æ€è¡¨ç¤ºf[i,j]"] --> E["å±æ€§ï¼šMax(f[i - 1][j - 1] + v[i,j], f[i - 1][j] + v[i][j])"]
C[çŠ¶æ€è®¡ç®—] --> F[æ¥è‡ªé‡‘å­—å¡”å†…è¯¥ç‚¹å·¦ä¸Šå’Œæ¥è‡ªå³ä¸Šçš„é›†åˆçš„åˆ’åˆ†]

```
###### ä»£ç 
```
// åŸé¢˜ï¼šæ´›è°·p1216,æ•°å­—ä¸‰è§’å½¢

#include <iostream>
#include <algorithm>

using namespace std;
  
const int N = 1010, INF = -1e9;

int n;
int f[N][N];
int a[N][N];

int main()
{
Â  Â  cin >> n;
Â  Â  for (int i = 1; i <= n; i ++)
Â  Â  Â  Â  for (int j = 1; j <= i; j ++)
Â  Â  Â  Â  Â  Â  cin >> a[i][j];

Â  Â  for (int i = 0; i <= n; i ++)
Â  Â  Â  Â  for (int j = 0; j <= i + 1; j ++)
Â  Â  Â  Â  Â  Â  f[i][j] = INF; //æœªç”¨åˆ°çš„ç½®å€¼æ— ç©·å°
Â  Â 
Â  Â f[1][1] = a[1][1];

Â  Â for (int i = 2; i <= n; i ++)
Â  Â  Â  Â  for (int j = 1; j <= i; j ++)
Â  Â  Â  Â  Â  Â  f[i][j] = max(f[i - 1][j - 1] + a[i][j], f[i - 1][j] + a[i][j]);
Â  Â  Â  Â  Â  Â  
Â  Â  int res = INF;

Â  Â  for (int i = 1; i <= n; i ++)
Â  Â  Â  Â  res = max(res, f[n][i]); // éå†æœ€åä¸€è¡Œï¼Œåˆ¤æ–­æœ€å¤§å€¼

Â  Â  cout << res;

Â  Â  return 0;
}
```
- [[æ—¶é—´å¤æ‚åº¦]]
#### ï¼ˆ2ï¼‰æœ€é•¿ä¸Šå‡å­åºåˆ—
- åŸé¢˜ï¼š[B3637 æœ€é•¿ä¸Šå‡å­åºåˆ—](https://www.luogu.com.cn/problem/B3637)
##### é¢˜ç›®æè¿°
è¿™æ˜¯ä¸€ä¸ªç®€å•çš„åŠ¨è§„æ¿å­é¢˜ã€‚

ç»™å‡ºä¸€ä¸ªç”±Â ğ‘›(ğ‘›â‰¤5000)Â ä¸ªä¸è¶…è¿‡Â $10^6$Â çš„æ­£æ•´æ•°ç»„æˆçš„åºåˆ—ã€‚è¯·è¾“å‡ºè¿™ä¸ªåºåˆ—çš„**æœ€é•¿ä¸Šå‡å­åºåˆ—**çš„é•¿åº¦ã€‚

æœ€é•¿ä¸Šå‡å­åºåˆ—æ˜¯æŒ‡ï¼Œä»åŸåºåˆ—ä¸­**æŒ‰é¡ºåº**å–å‡ºä¸€äº›æ•°å­—æ’åœ¨ä¸€èµ·ï¼Œè¿™äº›æ•°å­—æ˜¯**é€æ¸å¢å¤§**çš„ã€‚

##### è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡Œï¼Œä¸€ä¸ªæ•´æ•°Â ğ‘›ï¼Œè¡¨ç¤ºåºåˆ—é•¿åº¦ã€‚

ç¬¬äºŒè¡Œæœ‰Â ğ‘›Â ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºè¿™ä¸ªåºåˆ—ã€‚
##### è¾“å‡ºæ ¼å¼
ä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚

##### æ ·ä¾‹
###### è¾“å…¥1
```
6
1 2 4 1 3 4
```
###### è¾“å‡º1
```
4

æç¤ºï¼šåˆ†åˆ«å–å‡º 1,2,3,4 å³å¯
```
##### é¢˜è§£
###### æ€è·¯
```mermaid
flowchart LR
A[åŠ¨æ€è§„åˆ’] --> B["çŠ¶æ€è¡¨ç¤ºf[i]"]
A[åŠ¨æ€è§„åˆ’] --> C[çŠ¶æ€è®¡ç®—]
B["çŠ¶æ€è¡¨ç¤ºf[i]"] --> D["é›†åˆï¼šæ‰€æœ‰ä»¥ç¬¬iä¸ªæ•°ä¸ºç»“å°¾çš„ä¸Šå‡å­åºåˆ—"]
B["çŠ¶æ€è¡¨ç¤ºf[i]"] --> E["å±æ€§ï¼šMax"]
C[çŠ¶æ€è®¡ç®—] --> F["f[i]=max(f[j] + 1),j = 0,1,2,...,i-1"]

```
###### ä»£ç 
```
// åŸé¢˜ï¼šæ´›è°·B3637
#include <iostream>
#include <algorithm>

using namespace std;
  
const int N = 5010;
int n;
int a[N],f[N]; // f[i] ------ ä»¥ç¬¬ i ä¸ªæ•°ç»“å°¾çš„æœ€é•¿ä¸Šå‡åºåˆ—

int main()
{
Â  Â  cin >> n;
Â  Â  for (int i = 1; i <= n; i ++) cin >> a[i];
Â  Â  
Â  Â  for (int i = 1; i <= n; i ++)
Â  Â  {
Â  Â  Â  Â  f[i] = 1; // ä»¥ i ç»“å°¾çš„é›†åˆï¼Œåˆå§‹æ—¶åªæœ‰ç¬¬ i ä¸ªæ•°æœ¬èº«
Â  Â  Â  Â  for (int j = 1; j < i; j ++)
Â  Â  Â  Â  Â  Â  if (a[j] < a[i]) // å¦‚æœå‡ºç°ä¸Šå‡åºåˆ—
Â  Â  Â  Â  Â  Â  Â  Â  f[i] = max(f[i],f[j] + 1); // å–æœ€å¤§çš„ä¸Šå‡åºåˆ—
Â  Â  }

Â  Â  int res = 0;

Â  Â  for (int i = 1; i <= n; i ++)
Â  Â  Â  Â  res = max(res, f[i]);

Â  Â  cout << res;

Â  Â  return 0;
}
```
###### æ—¶é—´å¤æ‚åº¦
å…¬å¼ï¼š*çŠ¶æ€æ•° Ã— è½¬ç§»æ–¹ç¨‹è®¡ç®—é‡*
æœ€é•¿ä¸Šå‡å­åºåˆ—ä¸­ï¼ŒçŠ¶æ€æ•°ä¸º nï¼Œè€Œè®¡ç®—æ¯ä¸ªçŠ¶æ€éœ€è¦ä» 0 ~ i - 1ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯ nï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO($n^2$)
#### ï¼ˆ3ï¼‰æœ€é•¿ä¸Šå‡å­åºåˆ—II
- ä¼˜åŒ–ç‰ˆï¼Œæ•°æ®é‡åœ¨100000(åä¸‡)
##### ä»£ç 
```
// æ•°æ®é‡å˜ä¸º 1e5ï¼Œæ•°æ®èŒƒå›´åœ¨ -2e9 ~ 2e9 ä¹‹é—´ï¼Œæ‰€ä»¥ä¹‹å‰çš„ O(n^2) çš„æœ´ç´ åšæ³•ä¸å¯è¡Œï¼Œéœ€è¦ä¼˜åŒ–
#include <iostream>
#include <algorithm>
#include <cstring>

using namespace std;

const int N = 2e5 + 10;
int a[N], q[N];
  
int main()
{
Â  Â  int n;
Â  Â  cin >> n;

Â  Â  for (int i = 0; i < n; i ++) Â  Â cin >> a[i];

Â  Â  int len = 0; // æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦
Â  Â  q[0] = -2e9; // å¤„ç†è¾¹ç•Œé—®é¢˜

Â  Â  for (int i = 0; i < n; i ++)
Â  Â  {
Â  Â  Â  Â  int l = 0, r = len;

Â  Â  Â  Â  while(l < r)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  int mid = l + r + 1 >> 1;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // æ‰¾åˆ°å·²çŸ¥æœ€é•¿ä¸Šå‡å­åºåˆ—ä¸­æ¯” a[i] å°çš„ã€ æœ€å¤§çš„å€¼
Â  Â  Â  Â  Â  Â  if (q[mid] < a[i])
Â  Â  Â  Â  Â  Â  Â  Â  l = mid;
Â  Â  Â  Â  Â  Â  else r = mid - 1;
Â  Â  Â  Â  }
Â  Â  Â  Â  len = max(len, r + 1); 
Â  Â  Â  Â  // æŠŠ a[i] åŠ åˆ° q[r] åè¾¹ï¼ŒäºŒåˆ†æŸ¥æ‰¾åï¼Œè‹¥å­˜åœ¨ q[r + 1]ï¼Œå¿…å®šæ¯” a[i] å¤§ï¼Œæ‰€ä»¥å¯ä»¥æ›¿æ¢ï¼Œè€Œå¦‚æœæ‰€æœ‰å€¼éƒ½æ¯” a[i] å°ï¼Œé‚£ä¹ˆå°±ä¼šå°† a[i] åŠ åˆ°æ–°çš„ä¸€ä½

Â  Â  Â  Â  // å› ä¸ºæ‰¾ä¸Šå‡å­åºåˆ—æ—¶ï¼šå°çš„æ•°è‚¯å®šæ¯”å¤§çš„æ•°æ›´å¥½æ‰¾ä¸Šå‡åºåˆ—ï¼Œä¾‹å¦‚ï¼š1 3 4 æ¯” 1 3 6 æ›´å¥½æ‰¾åˆ°æ¥ä¸‹æ¥çš„ä¸Šå‡åºåˆ—

Â  Â  Â  Â  q[r + 1] = a[i]; // å¦‚æœæœ‰ï¼Œå°±æ›¿ä»£ï¼Œæ²¡æœ‰å°±æ·»åŠ 

Â  Â  }
Â  Â  
Â  Â  cout << len << endl;

Â  Â  return 0;
}
```

#### ï¼ˆ4ï¼‰æœ€é•¿[[å…¬å…±å­åºåˆ—]]1
- åŸé¢˜ï¼š[P1439 ã€æ¨¡æ¿ã€‘æœ€é•¿å…¬å…±å­åºåˆ—](https://www.luogu.com.cn/problem/P1439)
##### é¢˜ç›®æè¿°
ç»™å‡ºÂ 1, 2, â€¦, nÂ çš„ä¸¤ä¸ªæ’åˆ—â€‹ $P_1$ å’Œ $P_2$â€‹Â ï¼Œæ±‚å®ƒä»¬çš„æœ€é•¿å…¬å…±å­åºåˆ—ã€‚

##### è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•°Â ğ‘›ã€‚

æ¥ä¸‹æ¥ä¸¤è¡Œï¼Œæ¯è¡Œä¸ºÂ ğ‘›Â ä¸ªæ•°ï¼Œä¸ºè‡ªç„¶æ•°Â 1,2,â€¦,ğ‘› çš„ä¸€ä¸ªæ’åˆ—ã€‚
##### è¾“å‡ºæ ¼å¼
ä¸€ä¸ªæ•°ï¼Œå³æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ã€‚

##### æ ·ä¾‹
###### è¾“å…¥1
```
5 
3 2 1 4 5
1 2 3 4 5
```
###### è¾“å‡º1
```
3
```
###### æ•°æ®èŒƒå›´
- å¯¹äºÂ 50% çš„æ•°æ®ï¼ŒÂ ğ‘›â‰¤$10^3$ï¼›
- å¯¹äºÂ 100%Â çš„æ•°æ®ï¼ŒÂ ğ‘›â‰¤$10^5$ã€‚
##### é¢˜è§£
###### æ€è·¯
- å‚è€ƒæœ€é•¿ä¸Šå‡å­åºåˆ—çš„ä¼˜åŒ–å’Œç¦»æ•£åŒ–ï¼Œå‘ç°å°†ç¬¬ä¸€è¡Œæ•°å­—ç¦»æ•£åŒ–åï¼Œå†åœ¨ç¬¬äºŒè¡Œä¸­æ‰¾åˆ°ç¦»æ•£åŒ–åçš„æœ€é•¿ä¸Šå‡å­åºåˆ—ï¼Œå³ä¸ºæ‰€æ±‚ç­”æ¡ˆï¼Œå¹¶ä¸”æ—¶é—´å¤æ‚åº¦ä¸ºï¼š$O(nlog_2n)$
###### ä»£ç 
```
// æ€è·¯å‚è€ƒæœ€é•¿ä¸Šå‡å­åºåˆ—çš„ nlogn ä¼˜åŒ–ï¼Œç»“åˆç¦»æ•£åŒ–æ€è·¯

#include <iostream>

#include <algorithm>

#include <cstring>

  

using namespace std;

const int N = 2e5 + 10;

int n;

int a[N], b[N], q[N]; // q æ•°ç»„å­˜ç¦»æ•£åŒ–åçš„ b æ•°ç»„çš„æœ€é•¿ä¸Šå‡å­åºåˆ—çš„å€¼

int alls[N]; // alls[i]:å­˜å‚¨å€¼ i åœ¨ç¬¬ä¸€è¡Œä¸­çš„ä½ç½®

  

int main()

{

Â  Â  cin >> n;

Â  Â  for (int i = 0; i < n; i ++)

Â  Â  {

Â  Â  Â  Â  cin >> a[i];

Â  Â  Â  Â  alls[a[i]] = i;

Â  Â  }

Â  Â  for (int i = 0; i < n; i ++)

Â  Â  Â  Â  cin >> b[i];

  

Â  Â  int len = 0; // æœ€é•¿ä¸Šå‡å­åºåˆ—çš„é•¿åº¦

  

Â  Â  for (int i = 0; i < n; i ++) // éå†ç¬¬äºŒè¡Œ(æ•°ç»„b)çš„æ‰€æœ‰å€¼

Â  Â  {

Â  Â  Â  Â  int l = 0, r = len;

Â  Â  Â  Â  while(l < r)

Â  Â  Â  Â  {

Â  Â  Â  Â  Â  Â  int mid = l + r + 1 >> 1;

Â  Â  Â  Â  Â  Â  if (q[mid] < alls[b[i]]) // æ‰¾åˆ°æ•°ç»„ q ä¸­çš„å°äº alls[b[i]] çš„æœ€å¤§ä¸‹æ ‡å€¼

Â  Â  Â  Â  Â  Â  Â  Â  l = mid;

Â  Â  Â  Â  Â  Â  else r = mid - 1;

Â  Â  Â  Â  }

Â  Â  Â  Â  len = max(len, r + 1);

  

Â  Â  Â  Â  q[r + 1] = alls[b[i]];

Â  Â  }

Â  Â  cout << len << endl;

Â  Â  return 0;

}
```
#### ï¼ˆ5ï¼‰æœ€é•¿[[å…¬å…±å­åºåˆ—]]2
##### é¢˜ç›®æè¿°
ç»™å‡ºä¸¤ä¸ªé•¿åº¦åˆ†åˆ«ä¸º n å’Œ m çš„å­—ç¬¦ä¸² A å’Œ Bï¼Œæ±‚æ—¢æ˜¯ A çš„å­åºåˆ—åˆæ˜¯ B çš„å­åºåˆ—çš„å­—ç¬¦ä¸²é•¿åº¦**æœ€é•¿**æ˜¯å¤šå°‘

##### è¾“å…¥æ ¼å¼
ç¬¬ä¸€è¡ŒåŒ…å«ä¸¤ä¸ªæ•´æ•° n, mã€‚

ç¬¬äºŒè¡ŒåŒ…å«ä¸€ä¸ªé•¿åº¦ä¸º n çš„å­—ç¬¦ä¸² A
ç¬¬ä¸‰è¡ŒåŒ…å«ä¸€ä¸ªé•¿åº¦ä¸º m çš„å­—ç¬¦ä¸² B
å­—ç¬¦ä¸²å‡æœ‰å°å†™å­—æ¯æ„æˆ
##### è¾“å‡ºæ ¼å¼
ä¸€ä¸ªæ•°ï¼Œå³æœ€é•¿å…¬å…±å­åºåˆ—çš„é•¿åº¦ã€‚

##### æ ·ä¾‹
###### è¾“å…¥1
```
4 5
acbd
abedc
```
###### è¾“å‡º1
```
3

æç¤ºï¼šæœ€é•¿å…¬å…±å­åºåˆ—ä¸ºï¼šabd
```
###### æ•°æ®èŒƒå›´
- 1 â‰¤ n â‰¤ 1000
##### é¢˜è§£
###### æ€è·¯
```mermaid
flowchart LR
A[åŠ¨æ€è§„åˆ’] --> B["çŠ¶æ€è¡¨ç¤ºf[i,j]"]
A[åŠ¨æ€è§„åˆ’] --> C[çŠ¶æ€è®¡ç®—]
B["çŠ¶æ€è¡¨ç¤ºf[i,j]"] --> D["é›†åˆï¼šæ‰€æœ‰ç”±ç¬¬ä¸€ä¸ªåºåˆ—å‰iä¸ªå­—æ¯ï¼Œå’Œç¬¬äºŒä¸ªåºåˆ—çš„å‰jä¸ªå­—æ¯æ„æˆçš„å­åºåˆ—"]
B["çŠ¶æ€è¡¨ç¤ºf[i,j]"] --> E["å±æ€§ï¼šMax"]


```
###### ä»£ç 
```
// å­—ç¬¦ä¸²å‹
#include <iostream>
#include <cstring>
#include <algorithm>

using namespace std;

const int N = 1010;

int f[N][N];

char a[N], b[N];
int n,m;

int main()
{
Â  Â  cin >> n >> m;
Â  Â  scanf("%s%s", a + 1, b + 1);

Â  Â  for (int i = 1; i <= n; i ++)
Â  Â  Â  Â  for (int j = 1; j <= m; j ++)
Â  Â  Â  Â  {
Â  Â  Â  Â  Â  Â  f[i][j] = max(f[i - 1][j], f[i][j - 1]); // å› ä¸º f[i - 1][j] å’Œ f[i][j - 1] éƒ½åŒ…å«äº†çŠ¶æ€ f[i - 1][j - 1]ï¼Œæ‰€ä»¥å°±ä¸éœ€è¦å†è¿›è¡Œæ¯”è¾ƒ
Â  Â  Â  Â  Â  Â  if (a[i] == b[j]) f[i][j] = max(f[i][j], f[i - 1][j - 1] + 1);
Â  Â  Â  Â  }

Â  Â  cout << f[n][m];

Â  Â  return 0;
}
```