
# 二义性

---

### 一、定义

在编译原理中，**二义性（ambiguity）** 是指某个上下文无关文法（Context-Free Grammar, CFG）能够为同一个字符串生成两个或更多不同的语法分析树（或推导），即产生多种不同的解析方式。这种现象意味着该文法不能唯一确定某个字符串的语法结构，从而导致解析过程的模糊性，可能导致编译器无法正确理解源代码的含义。
### 二、示例

考虑以下简单的上下文无关文法，它用于定义加法和乘法表达式：

```
E → E + E
E → E * E
E → id
```

在这个文法中，`E` 是表达式，`id` 是标识符，`+` 表示加法，`*` 表示乘法。现在考虑一个表达式：

```
id + id * id
```

对于这个表达式，可以有两种不同的解析方式：

1. **第一种解析方式**（优先计算乘法）：
    - 按照通常的运算优先级规则，应该先进行乘法运算，然后再加法。
    - 语法分析树将会是：
      ```
            E
          / | \
         E  +  E
        id    / | \
             E  *  E
            id     id
      ```

2. **第二种解析方式**（先加法后乘法）：
    - 如果没有明确的优先级规则，可能会先进行加法运算。
    - 语法分析树将会是：
      ```
            E
          / | \
         E  *  E
        / | \
       E  +  E
      id     id
      ```

这两种解析方式产生了不同的语法分析树，也意味着有不同的计算顺序。因此，这个文法是**二义性的**。

### 三、二义性的问题：

- 二义性使得解析过程无法确定唯一的语法结构，从而会导致不同的解析结果。例如，在编译器中，二义性可能会导致程序的不同部分被错误地解释，进而生成错误的代码或运行时行为不符合预期。
- 解析器或编译器在面对二义性文法时，可能需要选择某种特定的解析规则，如运算符的优先级和结合性等，来避免模糊的解析结果。

### 四、解决二义性的方法：

1. **重写文法**：通过重写文法规则，明确表达不同操作符的*优先级*和结合性，减少或消除二义性。
2. **运用算符优先级**：在设计文法时，明确运算符的优先级和结合性，以确保解析的唯一性。
3. **使用解析器生成工具**：一些解析器生成工具（如 Yacc、Bison 等）支持通过明确的优先级和结合性声明来解决文法中的二义性。

### 总结：

**二义性** 是指文法中的某个字符串可以通过多种不同的解析方式生成不同的语法分析树，导致解析结果不唯一。二义性会影响编译器的正确性，解决二义性通常需要通过重写文法或明确运算符的优先级和结合性。